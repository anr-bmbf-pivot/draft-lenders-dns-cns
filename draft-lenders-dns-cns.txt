



TBD                                                        M. S. Lenders
Internet-Draft                                                 FU Berlin
Intended status: Best Current Practice                     T. C. Schmidt
Expires: 26 April 2023                                       HAW Hamburg
                                                             M. Wählisch
                                                               FU Berlin
                                                         23 October 2022


      Guidance on DNS Message Composition in Constrained Networks
                      draft-lenders-dns-cns-latest

Abstract

   This document provides guidance on the composition of DNS messages in
   constrained networks, where payload sizes can be heavily restricted
   by the link layer and power consumption must be taken into account.

About This Document

   This note is to be removed before publishing as an RFC.

   The latest revision of this draft can be found at https://anr-bmbf-
   pivot.github.io/draft-lenders-dns-cns/draft-lenders-dns-cns.html.
   Status information for this document may be found at
   https://datatracker.ietf.org/doc/draft-lenders-dns-cns/.

   Discussion of this document takes place on the TBD Working Group
   mailing list (mailto:TBD@example.com), which is archived at
   nicfs.nic.ddn.mil:~/namedroppers/*.Z.

   Source for this draft and an issue tracker can be found at
   https://github.com/anr-bmbf-pivot/draft-lenders-dns-cns.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 26 April 2023.

Copyright Notice

   Copyright (c) 2022 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction
   2.  Terminology
   3.  Constrained Node Considerations
   4.  DNS Server Consideration
   5.  Security Considerations
   6.  IANA Considerations
   7.  References
     7.1.  Normative References
     7.2.  Informative References
   Acknowledgments
   Authors' Addresses

1.  Introduction

   Constrained networks [RFC7228], such as IEEE 802.15.4 or LoRaWAN,
   often come with restrictions to the protocol data unit (PDU) in the
   link layer.  Adoption layers such as 6LoWPAN [RFC4944] and SCHC
   [RFC8724] provide mitigation in the form of compression and
   fragmentation to allow for IPv6 traffic.  However, restricting the
   application data to a minimum size greatly increases reliability by
   decreasing potentially lossy fragmentation.

   Constrained nodes [RFC7228] are furthermore often battery powered and
   follow a strict duty cycle.  To reduce unnecessary device wake-ups,
   the number of DNS messages should be reduced to a minimum.

   This document provides guidance on the composition of DNS messages to
   prevent fragmentation and reduce power consumption in constrained
   networks.

2.  Terminology

   A "DNS server" is a server that provides DNS information to a
   querying client.  For the purpose of this document this term may
   refer to queries over any transport for DNS, not just classic DNS
   [RFC1035], but also transports such as DNS over TLS [RFC7858], DNS
   over HTTPS [RFC8484], or DNS over CoAP [I-D.ietf-core-dns-over-coap].

   The terms "constrained node" and "constrained network" are used as
   defined in [RFC7228].

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

3.  Constrained Node Considerations

   Nodes within an constrained networks are only to assumed stub
   resolvers.  That means they only query information from an upstream
   DNS server but MUST NOT distribute any DNS information, received from
   an upstream DNS server, themselves.

4.  DNS Server Consideration

   A DNS server that is aware that the querying node is a node within a
   constrained network SHOULD resolve a CNAME or PTR record until the
   originally requested resource record type is reached.  This reduces
   the number of message exchanges within a constrained network.

   The DNS server SHOULD send compact answers, i.e., additional or
   authority sections in the DNS response MAY only be sent if needed or
   if it is anticipated that they help the DoC client to reduce
   additional queries.

5.  Security Considerations

   In the case when DNS clients act themselves as DNS servers, resolving
   CNAME and PTR records at the upstream DNS server may lead to the DNS
   client forwarding incorrect DNS information to its clients.  As such,
   this document prohibits the distribution of such information in
   Section 3

   TODO more security

6.  IANA Considerations

   This document has no IANA actions.

7.  References

7.1.  Normative References

   [RFC1035]  Mockapetris, P., "Domain names - implementation and
              specification", STD 13, RFC 1035, DOI 10.17487/RFC1035,
              November 1987, <https://www.rfc-editor.org/rfc/rfc1035>.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/rfc/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/rfc/rfc8174>.

7.2.  Informative References

   [I-D.ietf-core-dns-over-coap]
              Lenders, M. S., Amsüss, C., Gündoğan, C., Schmidt, T. C.,
              and M. Wählisch, "DNS over CoAP (DoC)", Work in Progress,
              Internet-Draft, draft-ietf-core-dns-over-coap-00, 5
              September 2022, <https://datatracker.ietf.org/doc/html/
              draft-ietf-core-dns-over-coap-00>.

   [RFC4944]  Montenegro, G., Kushalnagar, N., Hui, J., and D. Culler,
              "Transmission of IPv6 Packets over IEEE 802.15.4
              Networks", RFC 4944, DOI 10.17487/RFC4944, September 2007,
              <https://www.rfc-editor.org/rfc/rfc4944>.

   [RFC7228]  Bormann, C., Ersue, M., and A. Keranen, "Terminology for
              Constrained-Node Networks", RFC 7228,
              DOI 10.17487/RFC7228, May 2014,
              <https://www.rfc-editor.org/rfc/rfc7228>.

   [RFC7858]  Hu, Z., Zhu, L., Heidemann, J., Mankin, A., Wessels, D.,
              and P. Hoffman, "Specification for DNS over Transport
              Layer Security (TLS)", RFC 7858, DOI 10.17487/RFC7858, May
              2016, <https://www.rfc-editor.org/rfc/rfc7858>.

   [RFC8484]  Hoffman, P. and P. McManus, "DNS Queries over HTTPS
              (DoH)", RFC 8484, DOI 10.17487/RFC8484, October 2018,
              <https://www.rfc-editor.org/rfc/rfc8484>.

   [RFC8724]  Minaburo, A., Toutain, L., Gomez, C., Barthel, D., and JC.
              Zuniga, "SCHC: Generic Framework for Static Context Header
              Compression and Fragmentation", RFC 8724,
              DOI 10.17487/RFC8724, April 2020,
              <https://www.rfc-editor.org/rfc/rfc8724>.

Acknowledgments

   TODO acknowledge.

   *  Carsten Bormann

   *  Ben Schwartz

Authors' Addresses

   Martine Sophie Lenders
   Freie Universität Berlin
   Email: m.lenders@fu-berlin.de


   Thomas C. Schmidt
   HAW Hamburg
   Email: t.schmidt@haw-hamburg.de


   Matthias Wählisch
   Freie Universität Berlin
   Email: m.waehlisch@fu-berlin.de
